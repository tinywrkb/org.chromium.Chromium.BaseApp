name: fcitx5-gtk
buildsystem: cmake-ninja
config-opts:
  - -DGTK3_IM_MODULEDIR=${FLATPAK_DEST}/lib/gtkmodules/3.0.0/immodules
  - -DGTK4_IM_MODULEDIR=${FLATPAK_DEST}/lib/gtkmodules/4.0.0/immodules
  - -DENABLE_GIR=OFF
  - -DENABLE_GTK2_IM_MODULE=OFF
  - -DENABLE_GTK3_IM_MODULE=ON
  - -DENABLE_GTK4_IM_MODULE=ON
  - -DENABLE_SNOOPER=ON
sources:
  - type: archive
    url: https://github.com/fcitx/fcitx5-gtk/archive/5.0.13/fcitx5-gtk-5.0.13.tar.gz
    sha256: 40912698baca050bf06b6f5ce55a91cc14d852519aacb39b293c9f542a708250
    x-checker-data:
      type: anitya
      project-id: 138235
      stable-only: true
      url-template: https://github.com/fcitx/fcitx5-gtk/archive/$version/fcitx5-gtk-$version.tar.gz
cleanup:
  - /include
  - /lib/cmake
  - /lib/pkgconfig
modules:
  - name: extra-cmake-modules
    buildsystem: cmake
    sources:
      - type: archive
        url: https://download.kde.org/stable/frameworks/5.89/extra-cmake-modules-5.89.0.tar.xz
        sha256: 3dd7229a225923b8570a333ee6e4a07b0f5f700ea9538fdeb22cc3cbba69f02f
    cleanup:
      - '*'
